(function(){"use strict";try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('.thermostat[data-v-b7bd1f8e]{--dial-background-1: #334155;--dial-background-2: #1e293b;--dial-inner-1: #374151;--dial-inner-2: #1f2937;--dial-inner-3: #111827;--accent-primary: #06b6d4;--accent-glow: rgba(6, 182, 212, .4);--text-primary: #f1f5f9;--text-secondary: #94a3b8;--text-muted: #64748b;--tick-inactive: #475569;--range-labels: #64748b;--button-background-1: #334155;--button-background-2: #1e293b;--button-hover-1: #475569;--button-hover-2: #334155;--button-text: #94a3b8;--button-text-hover: #e2e8f0;--shadow-primary: rgba(0, 0, 0, .4);--shadow-inset-light: rgba(255, 255, 255, .05);--shadow-inset-dark: rgba(0, 0, 0, .4);position:relative;width:280px;height:280px;margin:0 auto;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.dial[data-v-b7bd1f8e]{position:relative;width:100%;height:100%;border-radius:50%;background:linear-gradient(145deg,var(--dial-background-1),var(--dial-background-2));box-shadow:0 8px 30px var(--shadow-primary),inset 0 2px 4px var(--shadow-inset-light)}.dial-inner[data-v-b7bd1f8e]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:75%;height:75%;border-radius:50%;background:linear-gradient(165deg,var(--dial-inner-1) 0%,var(--dial-inner-2) 50%,var(--dial-inner-3) 100%);box-shadow:inset 0 4px 12px var(--shadow-inset-dark),inset 0 -2px 6px var(--shadow-inset-light);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:10}.ticks[data-v-b7bd1f8e]{position:absolute;top:0;left:0;width:100%;height:100%}.tick[data-v-b7bd1f8e]{position:absolute;top:8px;left:50%;width:2px;height:10px;background:var(--tick-inactive);border-radius:1px;transform-origin:50% 132px}.tick.active[data-v-b7bd1f8e]{background:var(--accent-primary);box-shadow:0 0 4px var(--accent-glow)}.indicator[data-v-b7bd1f8e]{position:absolute;top:8px;left:50%;width:2px;height:10px;background:transparent;transform-origin:50% 132px;z-index:15;transition:transform .3s ease}.indicator[data-v-b7bd1f8e]:after{content:"";position:absolute;top:-6px;left:50%;transform:translate(-50%);width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-top:10px solid var(--accent-primary);filter:drop-shadow(0 0 4px var(--accent-glow))}.dial-content[data-v-b7bd1f8e]{text-align:center;color:var(--text-primary);z-index:15}.dial-label[data-v-b7bd1f8e]{font-size:13px;color:var(--text-secondary);margin-bottom:4px;letter-spacing:.5px}.dial-temperature[data-v-b7bd1f8e]{font-size:52px;font-weight:300;line-height:1;margin-bottom:4px;color:var(--text-primary)}.dial-temperature .degree[data-v-b7bd1f8e]{font-size:28px;vertical-align:super}.dial-status[data-v-b7bd1f8e]{font-size:12px;color:var(--text-muted);min-height:14px}.range-label[data-v-b7bd1f8e]{position:absolute;font-size:13px;color:var(--range-labels)}.range-label.min[data-v-b7bd1f8e]{bottom:28px;left:65px}.range-label.max[data-v-b7bd1f8e]{bottom:28px;right:65px}.controls[data-v-b7bd1f8e]{position:absolute;bottom:30px;left:50%;transform:translate(-50%);display:flex;gap:20px;z-index:20}.btn[data-v-b7bd1f8e]{width:40px;height:40px;border-radius:50%;border:none;background:linear-gradient(145deg,var(--button-background-1),var(--button-background-2));box-shadow:0 3px 8px var(--shadow-primary),inset 0 1px 2px var(--shadow-inset-light);color:var(--button-text);font-size:24px;font-weight:300;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .15s ease;-webkit-user-select:none;user-select:none}.btn[data-v-b7bd1f8e]:hover:not(:disabled){background:linear-gradient(145deg,var(--button-hover-1),var(--button-hover-2));color:var(--button-text-hover)}.btn[data-v-b7bd1f8e]:active:not(:disabled){transform:scale(.95);box-shadow:0 2px 4px var(--shadow-primary),inset 0 1px 2px var(--shadow-inset-light)}.btn[data-v-b7bd1f8e]:disabled{opacity:.5;cursor:not-allowed}.btn span[data-v-b7bd1f8e]{line-height:1;margin-top:-2px}')),document.head.appendChild(t)}}catch(a){console.error("vite-plugin-css-injected-by-js",a)}})();
(function(n,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("vuex"),require("vue")):typeof define=="function"&&define.amd?define(["exports","vuex","vue"],o):(n=typeof globalThis<"u"?globalThis:n||self,o(n["ui-thermostat"]={},n.vuex,n.Vue))})(this,function(n,o,e){"use strict";const d=(t,s)=>{const r=t.__vccOpts||t;for(const[a,i]of s)r[a]=i;return r},m={name:"UIThermostat",inject:["$socket","$dataTracker"],props:{id:{type:String,required:!0},props:{type:Object,default:()=>({})},state:{type:Object,default:()=>({enabled:!1,visible:!1})}},data(){return{minTemp:15,maxTemp:30,tempStep:.5,arcStartAngle:225,arcEndAngle:495,targetTemp:22.5,currentTemp:21.8,heatingPercent:0,ticks:[],totalTicks:30}},computed:{...o.mapState("data",["messages"]),currentTempLabel(){return`Current ${this.currentTemp.toFixed(1)}°`},heatingStatus(){return this.heatingPercent>0?`Heating ${this.heatingPercent}%`:""},indicatorStyle(){const t=(this.targetTemp-this.minTemp)/(this.maxTemp-this.minTemp),s=Math.round(t*this.totalTicks),r=this.arcEndAngle-this.arcStartAngle;return{transform:`translateX(-50%) rotate(${this.arcStartAngle+s/this.totalTicks*r}deg)`}},msg(){return this.messages[this.id]||{}}},watch:{msg:{handler(t){t&&t.payload&&this.updateFromPayload(t.payload)},deep:!0,immediate:!0},targetTemp(){this.generateTicks()}},mounted(){this.totalTicks=(this.maxTemp-this.minTemp)/this.tempStep,this.generateTicks(),this.$dataTracker(this.id,this.onInput,this.onLoad)},methods:{generateTicks(){const t=this.arcEndAngle-this.arcStartAngle,s=(this.targetTemp-this.minTemp)/(this.maxTemp-this.minTemp),r=Math.round(s*this.totalTicks);this.ticks=[];for(let a=0;a<=this.totalTicks;a++){const i=this.arcStartAngle+a/this.totalTicks*t;this.ticks.push({active:a<=r,style:{transform:`translateX(-50%) rotate(${i}deg)`}})}},adjustTemp(t){const s=Math.max(this.minTemp,Math.min(this.maxTemp,this.targetTemp+t));s!==this.targetTemp&&(this.targetTemp=s,this.sendTargetTemp())},updateFromPayload(t){t.currentTemp!==void 0&&(this.currentTemp=t.currentTemp),t.targetTemp!==void 0&&(this.targetTemp=t.targetTemp),t.heatingPercent!==void 0&&(this.heatingPercent=t.heatingPercent)},sendTargetTemp(){const t={payload:{targetTemp:this.targetTemp}};this.$socket.emit("widget-action",this.id,t)},onInput(t){t&&t.payload&&this.updateFromPayload(t.payload)},onLoad(t){t&&t.payload&&this.updateFromPayload(t.payload)}}},p={class:"thermostat"},h={class:"dial"},T={class:"ticks"},g={class:"dial-inner"},u={class:"dial-content"},f={class:"dial-label"},k={class:"dial-temperature"},y={class:"dial-status"},_={class:"range-label min"},S={class:"range-label max"},E={class:"controls"},b=["disabled"],x=["disabled"];function V(t,s,r,a,i,l){return e.openBlock(),e.createElementBlock("div",p,[e.createElementVNode("div",h,[e.createElementVNode("div",T,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.ticks,(c,P)=>(e.openBlock(),e.createElementBlock("div",{key:P,class:e.normalizeClass(["tick",{active:c.active}]),style:e.normalizeStyle(c.style)},null,6))),128))]),e.createElementVNode("div",{class:"indicator",style:e.normalizeStyle(l.indicatorStyle)},null,4),e.createElementVNode("div",g,[e.createElementVNode("div",u,[e.createElementVNode("div",f,e.toDisplayString(l.currentTempLabel),1),e.createElementVNode("div",k,[e.createElementVNode("span",null,e.toDisplayString(i.targetTemp.toFixed(1)),1),s[2]||(s[2]=e.createElementVNode("span",{class:"degree"},"°",-1))]),e.createElementVNode("div",y,e.toDisplayString(l.heatingStatus),1)])]),e.createElementVNode("span",_,e.toDisplayString(i.minTemp)+"°",1),e.createElementVNode("span",S,e.toDisplayString(i.maxTemp)+"°",1),e.createElementVNode("div",E,[e.createElementVNode("button",{class:"btn",onClick:s[0]||(s[0]=c=>l.adjustTemp(-i.tempStep)),disabled:i.targetTemp<=i.minTemp,"aria-label":"Decrease temperature"},[...s[3]||(s[3]=[e.createElementVNode("span",null,"−",-1)])],8,b),e.createElementVNode("button",{class:"btn",onClick:s[1]||(s[1]=c=>l.adjustTemp(i.tempStep)),disabled:i.targetTemp>=i.maxTemp,"aria-label":"Increase temperature"},[...s[4]||(s[4]=[e.createElementVNode("span",null,"+",-1)])],8,x)])])])}const N=d(m,[["render",V],["__scopeId","data-v-b7bd1f8e"]]);n.UIThermostat=N,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});
