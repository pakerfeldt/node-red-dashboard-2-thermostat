(function(){"use strict";try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('.thermostat[data-v-4c5233d1]{--dial-background-1: #334155;--dial-background-2: #1e293b;--dial-inner-1: #374151;--dial-inner-2: #1f2937;--dial-inner-3: #111827;--accent-primary: #06b6d4;--accent-glow: rgba(6, 182, 212, .4);--text-primary: #f1f5f9;--text-secondary: #94a3b8;--text-muted: #64748b;--tick-inactive: #475569;--range-labels: #64748b;--button-background-1: #334155;--button-background-2: #1e293b;--button-hover-1: #475569;--button-hover-2: #334155;--button-text: #94a3b8;--button-text-hover: #e2e8f0;--shadow-primary: rgba(0, 0, 0, .4);--shadow-inset-light: rgba(255, 255, 255, .05);--shadow-inset-dark: rgba(0, 0, 0, .4);position:relative;width:100%;aspect-ratio:1;container-type:size;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.dial[data-v-4c5233d1]{position:relative;width:100%;height:100%;border-radius:50%;background:linear-gradient(145deg,var(--dial-background-1),var(--dial-background-2));box-shadow:0 2.86cqw 10.71cqw var(--shadow-primary),inset 0 .71cqw 1.43cqw var(--shadow-inset-light)}.dial-inner[data-v-4c5233d1]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:75%;height:75%;border-radius:50%;background:linear-gradient(165deg,var(--dial-inner-1) 0%,var(--dial-inner-2) 50%,var(--dial-inner-3) 100%);box-shadow:inset 0 1.43cqw 4.29cqw var(--shadow-inset-dark),inset 0 -.71cqw 2.14cqw var(--shadow-inset-light);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:10}.ticks[data-v-4c5233d1]{position:absolute;top:0;left:0;width:100%;height:100%}.tick[data-v-4c5233d1]{position:absolute;top:2.86cqw;left:50%;width:.71cqw;height:3.57cqw;background:var(--tick-inactive);border-radius:.36cqw;transform-origin:50% 47.14cqw}.tick.active[data-v-4c5233d1]{background:var(--accent-primary);box-shadow:0 0 1.43cqw var(--accent-glow)}.indicator[data-v-4c5233d1]{position:absolute;top:2.86cqw;left:50%;width:.71cqw;height:3.57cqw;background:transparent;transform-origin:50% 47.14cqw;z-index:15;transition:transform .3s ease}.indicator[data-v-4c5233d1]:after{content:"";position:absolute;top:-2.14cqw;left:50%;transform:translate(-50%);width:0;height:0;border-left:2.14cqw solid transparent;border-right:2.14cqw solid transparent;border-top:3.57cqw solid var(--accent-primary);filter:drop-shadow(0 0 1.43cqw var(--accent-glow))}.dial-content[data-v-4c5233d1]{text-align:center;color:var(--text-primary);z-index:15}.dial-label[data-v-4c5233d1]{font-size:4.64cqw;color:var(--text-secondary);margin-bottom:1.43cqw;letter-spacing:.18cqw}.dial-temperature[data-v-4c5233d1]{font-size:18.57cqw;font-weight:300;line-height:1;margin-bottom:1.43cqw;color:var(--text-primary)}.dial-temperature .degree[data-v-4c5233d1]{font-size:10cqw;vertical-align:super}.dial-status[data-v-4c5233d1]{font-size:4.29cqw;color:var(--text-muted);min-height:5cqw}.range-label[data-v-4c5233d1]{position:absolute;font-size:4.64cqw;color:var(--range-labels)}.range-label.min[data-v-4c5233d1]{bottom:10cqw;left:23.21cqw}.range-label.max[data-v-4c5233d1]{bottom:10cqw;right:23.21cqw}.controls[data-v-4c5233d1]{position:absolute;bottom:10.71cqw;left:50%;transform:translate(-50%);display:flex;gap:7.14cqw;z-index:20}.btn[data-v-4c5233d1]{width:14.29cqw;height:14.29cqw;border-radius:50%;border:none;background:linear-gradient(145deg,var(--button-background-1),var(--button-background-2));box-shadow:0 1.07cqw 2.86cqw var(--shadow-primary),inset 0 .36cqw .71cqw var(--shadow-inset-light);color:var(--button-text);font-size:8.57cqw;font-weight:300;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .15s ease;-webkit-user-select:none;user-select:none}.btn[data-v-4c5233d1]:hover:not(:disabled){background:linear-gradient(145deg,var(--button-hover-1),var(--button-hover-2));color:var(--button-text-hover)}.btn[data-v-4c5233d1]:active:not(:disabled){transform:scale(.95);box-shadow:0 .71cqw 1.43cqw var(--shadow-primary),inset 0 .36cqw .71cqw var(--shadow-inset-light)}.btn[data-v-4c5233d1]:disabled{opacity:.5;cursor:not-allowed}.btn span[data-v-4c5233d1]{line-height:1;margin-top:-.71cqw}')),document.head.appendChild(t)}}catch(a){console.error("vite-plugin-css-injected-by-js",a)}})();
(function(n,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("vuex"),require("vue")):typeof define=="function"&&define.amd?define(["exports","vuex","vue"],o):(n=typeof globalThis<"u"?globalThis:n||self,o(n["ui-thermostat"]={},n.vuex,n.Vue))})(this,function(n,o,t){"use strict";const d=(e,s)=>{const r=e.__vccOpts||e;for(const[a,i]of s)r[a]=i;return r},m={name:"UIThermostat",inject:["$socket","$dataTracker"],props:{id:{type:String,required:!0},props:{type:Object,default:()=>({})},state:{type:Object,default:()=>({enabled:!1,visible:!1})}},data(){return{minTemp:15,maxTemp:30,tempStep:.5,arcStartAngle:225,arcEndAngle:495,targetTemp:22.5,currentTemp:21.8,heatingPercent:0,ticks:[],totalTicks:30}},computed:{...o.mapState("data",["messages"]),currentTempLabel(){return`Current ${this.currentTemp.toFixed(1)}°`},heatingStatus(){return this.heatingPercent>0?`Heating ${this.heatingPercent}%`:""},indicatorStyle(){const e=(this.targetTemp-this.minTemp)/(this.maxTemp-this.minTemp),s=Math.round(e*this.totalTicks),r=this.arcEndAngle-this.arcStartAngle;return{transform:`translateX(-50%) rotate(${this.arcStartAngle+s/this.totalTicks*r}deg)`}},msg(){return this.messages[this.id]||{}}},watch:{msg:{handler(e){e&&e.payload&&this.updateFromPayload(e.payload)},deep:!0,immediate:!0},targetTemp(){this.generateTicks()}},mounted(){this.totalTicks=(this.maxTemp-this.minTemp)/this.tempStep,this.generateTicks(),this.$dataTracker(this.id,this.onInput,this.onLoad)},methods:{generateTicks(){const e=this.arcEndAngle-this.arcStartAngle,s=(this.targetTemp-this.minTemp)/(this.maxTemp-this.minTemp),r=Math.round(s*this.totalTicks);this.ticks=[];for(let a=0;a<=this.totalTicks;a++){const i=this.arcStartAngle+a/this.totalTicks*e;this.ticks.push({active:a<=r,style:{transform:`translateX(-50%) rotate(${i}deg)`}})}},adjustTemp(e){const s=Math.max(this.minTemp,Math.min(this.maxTemp,this.targetTemp+e));s!==this.targetTemp&&(this.targetTemp=s,this.sendTargetTemp())},updateFromPayload(e){e.currentTemp!==void 0&&(this.currentTemp=e.currentTemp),e.targetTemp!==void 0&&(this.targetTemp=e.targetTemp),e.heatingPercent!==void 0&&(this.heatingPercent=e.heatingPercent)},sendTargetTemp(){const e={payload:{targetTemp:this.targetTemp}};this.$socket.emit("widget-action",this.id,e)},onInput(e){e&&e.payload&&this.updateFromPayload(e.payload)},onLoad(e){e&&e.payload&&this.updateFromPayload(e.payload)}}},p={class:"thermostat"},h={class:"dial"},T={class:"ticks"},g={class:"dial-inner"},u={class:"dial-content"},f={class:"dial-label"},k={class:"dial-temperature"},y={class:"dial-status"},_={class:"range-label min"},S={class:"range-label max"},E={class:"controls"},b=["disabled"],x=["disabled"];function V(e,s,r,a,i,l){return t.openBlock(),t.createElementBlock("div",p,[t.createElementVNode("div",h,[t.createElementVNode("div",T,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(i.ticks,(c,P)=>(t.openBlock(),t.createElementBlock("div",{key:P,class:t.normalizeClass(["tick",{active:c.active}]),style:t.normalizeStyle(c.style)},null,6))),128))]),t.createElementVNode("div",{class:"indicator",style:t.normalizeStyle(l.indicatorStyle)},null,4),t.createElementVNode("div",g,[t.createElementVNode("div",u,[t.createElementVNode("div",f,t.toDisplayString(l.currentTempLabel),1),t.createElementVNode("div",k,[t.createElementVNode("span",null,t.toDisplayString(i.targetTemp.toFixed(1)),1),s[2]||(s[2]=t.createElementVNode("span",{class:"degree"},"°",-1))]),t.createElementVNode("div",y,t.toDisplayString(l.heatingStatus),1)])]),t.createElementVNode("span",_,t.toDisplayString(i.minTemp)+"°",1),t.createElementVNode("span",S,t.toDisplayString(i.maxTemp)+"°",1),t.createElementVNode("div",E,[t.createElementVNode("button",{class:"btn",onClick:s[0]||(s[0]=c=>l.adjustTemp(-i.tempStep)),disabled:i.targetTemp<=i.minTemp,"aria-label":"Decrease temperature"},[...s[3]||(s[3]=[t.createElementVNode("span",null,"−",-1)])],8,b),t.createElementVNode("button",{class:"btn",onClick:s[1]||(s[1]=c=>l.adjustTemp(i.tempStep)),disabled:i.targetTemp>=i.maxTemp,"aria-label":"Increase temperature"},[...s[4]||(s[4]=[t.createElementVNode("span",null,"+",-1)])],8,x)])])])}const N=d(m,[["render",V],["__scopeId","data-v-4c5233d1"]]);n.UIThermostat=N,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});
