(function(){"use strict";try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('.thermostat-wrap[data-v-ae5d73e6]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.thermostat[data-v-ae5d73e6]{--dial-background-1: #334155;--dial-background-2: #1e293b;--dial-inner-1: #374151;--dial-inner-2: #1f2937;--dial-inner-3: #111827;--accent-primary: #06b6d4;--accent-glow: rgba(6, 182, 212, .4);--text-primary: #f1f5f9;--text-secondary: #94a3b8;--text-muted: #64748b;--tick-inactive: #475569;--range-labels: #64748b;--button-background-1: #334155;--button-background-2: #1e293b;--button-hover-1: #475569;--button-hover-2: #334155;--button-text: #94a3b8;--button-text-hover: #e2e8f0;--shadow-primary: rgba(0, 0, 0, .4);--shadow-inset-light: rgba(255, 255, 255, .05);--shadow-inset-dark: rgba(0, 0, 0, .4);width:var(--thermo-size, 100%);height:var(--thermo-size, 100%);max-width:100%;max-height:100%;position:relative;container-type:size;contain:size layout style;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.dial[data-v-ae5d73e6]{position:relative;width:100%;height:100%;border-radius:50%;background:linear-gradient(145deg,var(--dial-background-1),var(--dial-background-2));box-shadow:0 2.86cqmin 10.71cqmin var(--shadow-primary),inset 0 .71cqmin 1.43cqmin var(--shadow-inset-light)}.dial-inner[data-v-ae5d73e6]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:75%;height:75%;border-radius:50%;background:linear-gradient(165deg,var(--dial-inner-1) 0%,var(--dial-inner-2) 50%,var(--dial-inner-3) 100%);box-shadow:inset 0 1.43cqmin 4.29cqmin var(--shadow-inset-dark),inset 0 -.71cqmin 2.14cqmin var(--shadow-inset-light);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:10}.ticks[data-v-ae5d73e6]{position:absolute;top:0;left:0;width:100%;height:100%}.tick[data-v-ae5d73e6]{position:absolute;top:2.86cqmin;left:50%;width:.71cqmin;height:3.57cqmin;background:var(--tick-inactive);border-radius:.36cqmin;transform-origin:50% 47.14cqmin}.tick.active[data-v-ae5d73e6]{background:var(--accent-primary);box-shadow:0 0 1.43cqmin var(--accent-glow)}.indicator[data-v-ae5d73e6]{position:absolute;top:2.86cqmin;left:50%;width:.71cqmin;height:3.57cqmin;background:transparent;transform-origin:50% 47.14cqmin;z-index:15;transition:transform .3s ease}.indicator[data-v-ae5d73e6]:after{content:"";position:absolute;top:-2.14cqmin;left:50%;transform:translate(-50%);width:0;height:0;border-left:2.14cqmin solid transparent;border-right:2.14cqmin solid transparent;border-top:3.57cqmin solid var(--accent-primary);filter:drop-shadow(0 0 1.43cqmin var(--accent-glow))}.dial-content[data-v-ae5d73e6]{text-align:center;color:var(--text-primary);z-index:15}.dial-label[data-v-ae5d73e6]{font-size:4.64cqmin;color:var(--text-secondary);margin-bottom:1.43cqmin;letter-spacing:.18cqmin}.dial-temperature[data-v-ae5d73e6]{font-size:18.57cqmin;font-weight:300;line-height:1;margin-bottom:1.43cqmin;color:var(--text-primary)}.dial-temperature .degree[data-v-ae5d73e6]{font-size:10cqmin;vertical-align:super}.dial-status[data-v-ae5d73e6]{font-size:4.29cqmin;color:var(--text-muted);min-height:5cqmin}.range-label[data-v-ae5d73e6]{position:absolute;font-size:4.64cqmin;color:var(--range-labels)}.range-label.min[data-v-ae5d73e6]{bottom:10cqmin;left:23.21cqmin}.range-label.max[data-v-ae5d73e6]{bottom:10cqmin;right:23.21cqmin}.controls[data-v-ae5d73e6]{position:absolute;bottom:10.71cqmin;left:50%;transform:translate(-50%);display:flex;gap:7.14cqmin;z-index:20}.btn[data-v-ae5d73e6]{width:14.29cqmin;height:14.29cqmin;border-radius:50%;border:none;background:linear-gradient(145deg,var(--button-background-1),var(--button-background-2));box-shadow:0 1.07cqmin 2.86cqmin var(--shadow-primary),inset 0 .36cqmin .71cqmin var(--shadow-inset-light);color:var(--button-text);font-size:8.57cqmin;font-weight:300;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .15s ease;-webkit-user-select:none;user-select:none}.btn[data-v-ae5d73e6]:hover:not(:disabled){background:linear-gradient(145deg,var(--button-hover-1),var(--button-hover-2));color:var(--button-text-hover)}.btn[data-v-ae5d73e6]:active:not(:disabled){transform:scale(.95);box-shadow:0 .71cqmin 1.43cqmin var(--shadow-primary),inset 0 .36cqmin .71cqmin var(--shadow-inset-light)}.btn[data-v-ae5d73e6]:disabled{opacity:.5;cursor:not-allowed}.btn span[data-v-ae5d73e6]{line-height:1;margin-top:-.71cqmin}@container (max-width: 150px){.range-label[data-v-ae5d73e6],.dial-status[data-v-ae5d73e6]{display:none}.tick[data-v-ae5d73e6]{opacity:.5}}@container (max-width: 100px){.ticks[data-v-ae5d73e6]{display:none}.controls[data-v-ae5d73e6]{gap:3cqmin}.btn[data-v-ae5d73e6]{width:12cqmin;height:12cqmin;font-size:7cqmin}}')),document.head.appendChild(t)}}catch(a){console.error("vite-plugin-css-injected-by-js",a)}})();
(function(a,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("vuex"),require("vue")):typeof define=="function"&&define.amd?define(["exports","vuex","vue"],o):(a=typeof globalThis<"u"?globalThis:a||self,o(a["ui-thermostat"]={},a.vuex,a.Vue))})(this,function(a,o,e){"use strict";const d=(t,s)=>{const n=t.__vccOpts||t;for(const[r,i]of s)n[r]=i;return n},m={name:"UIThermostat",inject:["$socket","$dataTracker"],props:{id:{type:String,required:!0},props:{type:Object,default:()=>({})},state:{type:Object,default:()=>({enabled:!1,visible:!1})}},beforeUnmount(){this._ro&&this._ro.disconnect(),window.removeEventListener("resize",this.updateThermostatSize)},data(){return{minTemp:15,maxTemp:30,tempStep:.5,arcStartAngle:225,arcEndAngle:495,targetTemp:22.5,currentTemp:21.8,heatingPercent:0,ticks:[],totalTicks:30,_ro:null}},computed:{...o.mapState("data",["messages"]),currentTempLabel(){return`Current ${this.currentTemp.toFixed(1)}°`},heatingStatus(){return this.heatingPercent>0?`Heating ${this.heatingPercent}%`:""},indicatorStyle(){const t=(this.targetTemp-this.minTemp)/(this.maxTemp-this.minTemp),s=Math.round(t*this.totalTicks),n=this.arcEndAngle-this.arcStartAngle;return{transform:`translateX(-50%) rotate(${this.arcStartAngle+s/this.totalTicks*n}deg)`}},msg(){return this.messages[this.id]||{}}},watch:{msg:{handler(t){t&&t.payload&&this.updateFromPayload(t.payload)},deep:!0,immediate:!0},targetTemp(){this.generateTicks()}},mounted(){this.totalTicks=(this.maxTemp-this.minTemp)/this.tempStep,this.generateTicks(),this.$dataTracker(this.id,this.onInput,this.onLoad),this.updateThermostatSize(),this._ro=new ResizeObserver(()=>this.updateThermostatSize()),this._ro.observe(this.$refs.wrapEl),window.addEventListener("resize",this.updateThermostatSize,{passive:!0})},methods:{generateTicks(){const t=this.arcEndAngle-this.arcStartAngle,s=(this.targetTemp-this.minTemp)/(this.maxTemp-this.minTemp),n=Math.round(s*this.totalTicks);this.ticks=[];for(let r=0;r<=this.totalTicks;r++){const i=this.arcStartAngle+r/this.totalTicks*t;this.ticks.push({active:r<=n,style:{transform:`translateX(-50%) rotate(${i}deg)`}})}},adjustTemp(t){const s=Math.max(this.minTemp,Math.min(this.maxTemp,this.targetTemp+t));s!==this.targetTemp&&(this.targetTemp=s,this.sendTargetTemp())},updateFromPayload(t){t.currentTemp!==void 0&&(this.currentTemp=t.currentTemp),t.targetTemp!==void 0&&(this.targetTemp=t.targetTemp),t.heatingPercent!==void 0&&(this.heatingPercent=t.heatingPercent)},sendTargetTemp(){const t={payload:{targetTemp:this.targetTemp}};this.$socket.emit("widget-action",this.id,t)},onInput(t){t&&t.payload&&this.updateFromPayload(t.payload)},onLoad(t){t&&t.payload&&this.updateFromPayload(t.payload)},updateThermostatSize(){const t=this.$refs.wrapEl;if(!t)return;const s=t.getBoundingClientRect(),n=Math.floor(Math.min(s.width,s.height));t.style.setProperty("--thermo-size",`${n}px`)}}},p={ref:"wrapEl",class:"thermostat-wrap"},h={class:"thermostat"},T={class:"dial"},g={class:"ticks"},u={class:"dial-inner"},f={class:"dial-content"},_={class:"dial-label"},k={class:"dial-temperature"},S={class:"dial-status"},y={class:"range-label min"},E={class:"range-label max"},b={class:"controls"},x=["disabled"],V=["disabled"];function N(t,s,n,r,i,l){return e.openBlock(),e.createElementBlock("div",p,[e.createElementVNode("div",h,[e.createElementVNode("div",T,[e.createElementVNode("div",g,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.ticks,(c,P)=>(e.openBlock(),e.createElementBlock("div",{key:P,class:e.normalizeClass(["tick",{active:c.active}]),style:e.normalizeStyle(c.style)},null,6))),128))]),e.createElementVNode("div",{class:"indicator",style:e.normalizeStyle(l.indicatorStyle)},null,4),e.createElementVNode("div",u,[e.createElementVNode("div",f,[e.createElementVNode("div",_,e.toDisplayString(l.currentTempLabel),1),e.createElementVNode("div",k,[e.createElementVNode("span",null,e.toDisplayString(i.targetTemp.toFixed(1)),1),s[2]||(s[2]=e.createElementVNode("span",{class:"degree"},"°",-1))]),e.createElementVNode("div",S,e.toDisplayString(l.heatingStatus),1)])]),e.createElementVNode("span",y,e.toDisplayString(i.minTemp)+"°",1),e.createElementVNode("span",E,e.toDisplayString(i.maxTemp)+"°",1),e.createElementVNode("div",b,[e.createElementVNode("button",{class:"btn",onClick:s[0]||(s[0]=c=>l.adjustTemp(-i.tempStep)),disabled:i.targetTemp<=i.minTemp,"aria-label":"Decrease temperature"},[...s[3]||(s[3]=[e.createElementVNode("span",null,"−",-1)])],8,x),e.createElementVNode("button",{class:"btn",onClick:s[1]||(s[1]=c=>l.adjustTemp(i.tempStep)),disabled:i.targetTemp>=i.maxTemp,"aria-label":"Increase temperature"},[...s[4]||(s[4]=[e.createElementVNode("span",null,"+",-1)])],8,V)])])])],512)}const z=d(m,[["render",N],["__scopeId","data-v-ae5d73e6"]]);a.UIThermostat=z,Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})});
